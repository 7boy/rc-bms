{"version":3,"sources":["webpack:///./src/views/command/Role.vue?9869","webpack:///src/views/command/Role.vue","webpack:///./src/views/command/Role.vue?aa99","webpack:///./src/views/command/Role.vue","webpack:///./src/views/command/Role.vue?f43f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","placeholder","nativeOn","keyup","$event","_k","keyCode","key","getData","model","value","table","query","condition","callback","$$v","$set","trim","expression","on","click","_v","showDialog","cellspacing","_m","_l","item","_s","currentPage","pageSize","roleName","title","roleDesc","roleType","Date","createTime","$Format","getRoleDetail","remove","directives","name","rawName","list","length","page-size","current-page","layout","total","current-change","handleCurrentChange","update:currentPage","modal","center","visible","dialog","width","update:visible","ref","label-width","label-position","prop","label","roleList","placement","trigger","data","authorities","props","defaultProps","default-expanded-keys","node-key","show-checkbox","default-checked-keys","checkedKeys","slot","$refs","tree","setCheckedKeys","getCheckedKeys","editRole","staticRenderFns","Rolevue_type_script_lang_js_","url","loading","el","$conf","PAGES","children","methods","type","_getRoleDetail","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","i","wrap","_context","prev","next","$ajax","id","sent","push","stop","_x","apply","arguments","getAuthorities","_getAuthorities","_callee2","_context2","console","log","_getData","_callee3","_context3","pageItems","totalCount","_remove","_callee4","_context4","$confirm","confirmButtonText","cancelButtonText","$remind","_x2","_editRole","_callee5","text","_context5","$message","warning","abrupt","e","mounted","command_Rolevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Role_vue_vue_type_style_index_0_id_9016157c_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Role_vue_vue_type_style_index_0_id_9016157c_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-f122cd3a.72f871d4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"table-box\"},[_c('el-input',{staticClass:\"mr10\",attrs:{\"placeholder\":\"请输入：角色名称\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.getData()}},model:{value:(_vm.table.query.condition.roleName),callback:function ($$v) {_vm.$set(_vm.table.query.condition, \"roleName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"table.query.condition.roleName\"}}),_c('div',{staticClass:\"btn-main \",on:{\"click\":_vm.getData}},[_vm._v(\"查   询\")]),_c('div',{staticClass:\"btn-main btn-add\",on:{\"click\":function($event){_vm.showDialog('add')}}},[_vm._v(\"新建自定义角色\")]),_c('table',{staticClass:\"table\",attrs:{\"cellspacing\":\"0\"}},[_vm._m(0),_vm._l((_vm.table.list),function(item,key){return _c('tr',[_c('td',[_vm._v(_vm._s((key + 1) + (_vm.table.query.currentPage - 1) * _vm.table.query.pageSize))]),_c('td',[_vm._v(_vm._s(item.roleName))]),_c('td',{attrs:{\"title\":item.roleDesc}},[_vm._v(_vm._s(item.roleDesc))]),_c('td',[_vm._v(_vm._s(item.roleType === '00'? '默认': '自定义'))]),_c('td',[_vm._v(_vm._s(new Date(item.createTime).$Format('yyyy-MM-dd hh:mm:ss')))]),_c('td',[_c('span',{staticClass:\"oper\",on:{\"click\":function($event){_vm.getRoleDetail(item)}}},[_vm._v(\"修改\")]),_c('span',{staticClass:\"col\"}),_c('span',{staticClass:\"oper\",on:{\"click\":function($event){_vm.remove(item)}}},[_vm._v(\"删除\")])])])}),_c('no-data',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.table.list.length),expression:\"!table.list.length\"}]})],2),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"page-size\":_vm.table.query.pageSize,\"current-page\":_vm.table.query.currentPage,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.table.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.table.query, \"currentPage\", $event)}}})],1),_c('el-dialog',{attrs:{\"modal\":false,\"center\":\"\",\"title\":_vm.title,\"visible\":_vm.dialog,\"width\":\"420px\"},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"label-width\":\"70px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"角色名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色名称\"},model:{value:(_vm.roleList.query.roleName),callback:function ($$v) {_vm.$set(_vm.roleList.query, \"roleName\", $$v)},expression:\"roleList.query.roleName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"角色描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色描述\"},model:{value:(_vm.roleList.query.roleDesc),callback:function ($$v) {_vm.$set(_vm.roleList.query, \"roleDesc\", $$v)},expression:\"roleList.query.roleDesc\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"权限设置\"}},[_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"400\",\"trigger\":\"click\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('el-tree',{ref:\"tree\",staticClass:\"el-tree\",attrs:{\"data\":_vm.authorities.list,\"props\":_vm.defaultProps,\"default-expanded-keys\":['root'],\"node-key\":\"id\",\"show-checkbox\":\"\",\"default-checked-keys\":_vm.checkedKeys}}),_c('div',{staticClass:\"btn-set\",attrs:{\"slot\":\"reference\"},on:{\"click\":function($event){_vm.$refs.tree.setCheckedKeys(_vm.checkedKeys);_vm.visible = !_vm.visible}},slot:\"reference\"},[_vm._v(\"设置权限\")]),_c('div',{staticClass:\"btns mt25\"},[_c('div',{staticClass:\"btn-main mr15\",on:{\"click\":function($event){_vm.checkedKeys = _vm.$refs.tree.getCheckedKeys();_vm.visible = false}}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"关闭\")])])],1)],1)],1),_c('div',{staticClass:\"btns mt25\"},[_c('div',{staticClass:\"btn-main mr15\",on:{\"click\":function($event){_vm.editRole()}}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"关闭\")])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('th',{attrs:{\"width\":\"13%\"}},[_vm._v(\"序号\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"角色名称\")]),_c('th',{attrs:{\"width\":\"25%\"}},[_vm._v(\"角色描述\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"类型\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"创建时间\")]),_c('th',{attrs:{\"width\":\"20%\"}},[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"table-box\">\n      <el-input v-model.trim=\"table.query.condition.roleName\"\n                @keyup.enter.native=\"getData()\"\n                class=\"mr10\" placeholder=\"请输入：角色名称\"></el-input>\n      <div @click=\"getData\" class=\"btn-main \">查&nbsp;&nbsp;&nbsp;询</div>\n      <div @click=\"showDialog('add')\" class=\"btn-main btn-add\">新建自定义角色</div>\n      <table cellspacing=\"0\"  class=\"table\">\n        <tr>\n          <th width=\"13%\">序号</th>\n          <th width=\"14%\">角色名称</th>\n          <th width=\"25%\">角色描述</th>\n          <th width=\"14%\">类型</th>\n          <th width=\"14%\">创建时间</th>\n          <th width=\"20%\">操作</th>\n        </tr>\n        <tr v-for=\"(item,key) in table.list\">\n          <td>{{(key + 1) + (table.query.currentPage - 1) * table.query.pageSize}}</td>\n          <td>{{item.roleName}}</td>\n          <td :title=\"item.roleDesc\">{{item.roleDesc}}</td>\n          <td>{{item.roleType === '00'? '默认': '自定义'}}</td>\n          <td>{{new Date(item.createTime).$Format('yyyy-MM-dd hh:mm:ss')}}</td>\n          <td>\n            <span @click=\"getRoleDetail(item)\" class=\"oper\">修改</span>\n            <span class=\"col\"></span>\n            <span @click=\"remove(item)\" class=\"oper\">删除</span>\n          </td>\n        </tr>\n        <no-data v-show=\"!table.list.length\"></no-data>\n      </table>\n      <el-pagination\n          class=\"pagination\"\n          :page-size=\"table.query.pageSize\"\n          @current-change=\"handleCurrentChange\"\n          :current-page.sync=\"table.query.currentPage\"\n          layout=\"prev, pager, next, jumper\"\n          :total=\"table.total\">\n      </el-pagination>\n    </div>\n    <el-dialog :modal=\"false\" center :title=\"title\"\n               :visible.sync=\"dialog\" width=\"420px\">\n      <el-form class=\"form\" ref=\"form\" label-width=\"70px\" label-position=\"left\">\n        <el-form-item prop=\"oldPassword\" label=\"角色名称\">\n          <el-input v-model=\"roleList.query.roleName\"  placeholder=\"请输入角色名称\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"角色描述\">\n          <el-input v-model=\"roleList.query.roleDesc\" placeholder=\"请输入角色描述\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"权限设置\">\n          <el-popover\n            v-model=\"visible\"\n            placement=\"right\"\n            width=\"400\"\n            trigger=\"click\">\n          <el-tree class=\"el-tree\" :data=\"authorities.list\"\n                   :props=\"defaultProps\"\n                   :default-expanded-keys=\"['root']\"\n                   ref=\"tree\"\n                   node-key=\"id\" show-checkbox\n                   :default-checked-keys=\"checkedKeys\"\n                   ></el-tree>\n          <div slot=\"reference\"\n               @click=\"$refs.tree.setCheckedKeys(checkedKeys);visible = !visible\" class=\"btn-set\">设置权限</div>\n          <div class=\"btns mt25\">\n            <div @click=\"checkedKeys = $refs.tree.getCheckedKeys();visible = false\" class=\"btn-main mr15\">提交</div>\n            <div @click=\"visible = false\" class=\"btn-main\">关闭</div>\n          </div>\n        </el-popover>\n        </el-form-item>\n      </el-form>\n      <div class=\"btns mt25\">\n        <div  @click=\"editRole()\" class=\"btn-main mr15\">提交</div>\n        <div @click=\"dialog = false\" class=\"btn-main\">关闭</div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"Info\",\n    data(){\n      return {\n        table:{\n          url: '/role/list',\n          loading: '.table',\n          list: [],\n          total: 0,\n          el: '.table',\n          query:{\n            condition:{\n              roleName: '',\n            },\n            currentPage: 1,\n            pageSize: this.$conf.PAGES,\n          }\n        },\n        // 权限列表\n        authorities: {\n          url: '/role/authorities',\n          list: []\n        },\n        // 选中的角色\n        checkedKeys: [],\n        // 角色\n        roleList: {\n          url: '/role/add',\n          query:{\n            roleName: '',\n            roleDesc: '',\n            authorities: []\n          }\n        },\n        visible: false,\n        title: '新建自定义角色',\n        dialog: false,\n        defaultProps: {\n          children: 'authorities',\n          label: 'name'\n        }\n      }\n    },\n    methods: {\n      // 展现弹窗\n      showDialog(type, item){\n        this.dialog = true\n        this.checkedKeys = []\n\n          this.title = '新建自定义角色'\n          this.roleList.query = {\n            roleName: '',\n            roleDesc: '',\n            authorities: []\n          }\n      },\n      // 获取角色详情\n      async getRoleDetail(item){\n        let res = await this.$ajax({\n          url: '/role/detail',\n          query: {\n            id: item.id\n          }\n        })\n        this.roleList.query = {\n          id: res.id,\n          roleName: res.roleName,\n          roleDesc: res.roleDesc,\n          authorities: res.authorities\n        }\n        this.checkedKeys = []\n        for(let i in res.authorities){\n          this.checkedKeys.push(i)\n        }\n        this.dialog = true\n        this.title = '修改自定义角色'\n      },\n      // 查询所有权限\n      async getAuthorities(){\n        let res = await this.$ajax(this.authorities)\n        console.log(res)\n        this.authorities.list = [res]\n      },\n      // 获取表格数据\n      async getData(){\n        let res = await this.$ajax(this.table)\n        this.table.list = res.pageItems || []\n        this.table.total = res.totalCount\n      },\n      // 删除\n      async remove(item){\n        await this.$confirm(`数据删除后将不能恢复，是否确定删除！`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        await this.$ajax({\n          url: '/role/delete',\n          query:{\n            id: item.id\n          }\n        })\n        this.$remind('删除成功')\n        this.getData()\n      },\n      // 新建角色\n      async editRole(){\n        let text = ''\n        if(this.title === '修改自定义角色'){\n          text = '修改成功'\n          this.roleList.url = '/role/update'\n        }else{\n          text = '新建成功'\n          this.roleList.url = '/role/add'\n        }\n        this.roleList.query.authorities = this.checkedKeys\n        if(!this.roleList.query.authorities.length){\n          this.$message.warning('请设置权限')\n          return\n        }\n        if(!this.roleList.query.roleName){\n          this.$message.warning('请输入角色名称')\n          return\n        }\n        await this.$ajax(this.roleList)\n        this.$remind(text)\n        this.dialog = false\n        this.table.query = {\n          condition:{\n            roleName: '',\n          },\n          currentPage: 1,\n          pageSize: this.$conf.PAGES,\n        }\n        this.getData()\n      },\n      // 分页切换\n      handleCurrentChange(e){\n        this.table.query.currentPage = e\n        this.getData()\n      }\n    },\n    mounted() {\n      this.getData()\n      this.getAuthorities()\n    }\n  }\n</script>\n\n<style lang=\"sass\" scoped>\n  .btn-set\n    width: 100%\n    text-align: center\n    height: 34px\n    line-height: 34px\n    border-radius: 20px\n    color: $main-c\n    border: 1px solid $main-c\n    cursor: pointer\n    display: inline-block\n    &:hover\n      opacity: .7\n    &:active\n      opacity: 1\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=9016157c&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=9016157c&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9016157c\",\n  null\n  \n)\n\ncomponent.options.__file = \"Role.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=9016157c&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=9016157c&lang=sass&scoped=true&\""],"sourceRoot":""}