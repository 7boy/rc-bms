(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00e76ec1"],{"0468":function(e,t,n){},"28a5":function(e,t,n){n("214f")("split",2,function(e,t,a){"use strict";var i=n("aae3"),r=a,o=[].push,l="split",s="length",u="lastIndex";if("c"=="abbc"[l](/(b)*/)[1]||4!="test"[l](/(?:)/,-1)[s]||2!="ab"[l](/(?:ab)*/)[s]||4!="."[l](/(.?)(.?)/)[s]||"."[l](/()()/)[s]>1||""[l](/.?/)[s]){var c=void 0===/()??/.exec("")[1];a=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return r.call(n,e,t);var a,l,p,d,h,f=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,g=void 0===t?4294967295:t>>>0,w=new RegExp(e.source,m+"g");c||(a=new RegExp("^"+w.source+"$(?!\\s)",m));while(l=w.exec(n)){if(p=l.index+l[0][s],p>b&&(f.push(n.slice(b,l.index)),!c&&l[s]>1&&l[0].replace(a,function(){for(h=1;h<arguments[s]-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l[s]>1&&l.index<n[s]&&o.apply(f,l.slice(1)),d=l[0][s],b=p,f[s]>=g))break;w[u]===l.index&&w[u]++}return b===n[s]?!d&&w.test("")||f.push(""):f.push(n.slice(b)),f[s]>g?f.slice(0,g):f}}else"0"[l](void 0,0)[s]&&(a=function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)});return[function(n,i){var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):a.call(String(r),n,i)},a]})},"5f52":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("bread-nav",{attrs:{nav:e.nav}}),n("main-part",[n("div",{staticClass:"btn-block"},[n("a",{staticClass:"f-small main-c",attrs:{download:"",href:"../gy-files/template/教职工导入模板.xlsx"}},[e._v("下载模板")]),n("label",{attrs:{for:"importDom"}},[n("div",{staticClass:"btn-main btn-upload mr15 ml5"},[e._v("批量导入")])]),n("input",{ref:"upload",attrs:{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"importDom",type:"file",hidden:""},on:{change:function(t){e.upload(t)}}}),n("div",{staticClass:"btn-main mr15",on:{click:function(t){e.$exportDetail("/export/teacherInfoExport.do")}}},[e._v("导出")]),n("div",{staticClass:"btn-main-deepen",on:{click:function(t){e.$router.push("/personnel/teacher/addEdit")}}},[e._v("添加教职工")])]),n("search-box",{attrs:{searchData:e.searchData,table:e.table}}),n("el-table",{staticClass:"el-table",staticStyle:{width:"100%"},attrs:{data:e.table.list,border:""}},[n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",fixed:"",prop:"teacherName",label:"姓名",width:"90"}}),n("el-table-column",{attrs:{align:"center",fixed:"",label:"性别",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.Sex.getName(t.row.sex)))])]}}])}),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",fixed:"",label:"部门",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.org.map(function(e){return e.name}).join("，")))])]}}])}),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",fixed:"",prop:"idCard",label:"身份证号",width:"170"}}),n("el-table-column",{attrs:{align:"center",label:"年龄",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.computedYear(t.row.birthday)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"职称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.newestTile(t.row.teacherTitleList)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"评定时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.newestTime(t.row.teacherTitleList)))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"formationType",label:"编制",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.FormationType.getName(t.row.formationType)))])]}}])}),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"teacherPosition",label:"岗位",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.teacherPosition))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"folk",label:"民族",width:"90"}}),n("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"residence",label:"籍贯",width:"90"}}),n("el-table-column",{attrs:{align:"center",label:"参加工作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("substrTime")(t.row.joinWorkTime)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"政治面貌",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.PoliticsStatus.getName(t.row.politicsStatus)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"加入时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("substrTime")(t.row.joinPartyTime)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"第一学历",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.Education.getName(t.row.firstEducation)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"最高学历",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.HighestEducation.getName(t.row.highestEducation)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"毕业时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("substrTime")(t.row.graduateTime)))])]}}])}),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"graduateSchool",label:"毕业学校",width:"170"}}),n("el-table-column",{attrs:{align:"center",label:"来校时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("substrTime")(t.row.joinSchoolTime)))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"校龄",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.computedYear(t.row.joinSchoolTime)))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"joinPartyTime",label:"加入时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("substrTime")(t.row.joinPartyTime)))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"phone",fixed:"right",label:"联系电话",width:"120"}}),n("el-table-column",{attrs:{align:"center",fixed:"right",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.$enums.JobStatus.getName(t.row.jobStatus)))])]}}])}),n("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){e.goToDetail("detail",t.row)}}},[e._v("详情\n          ")]),n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){e.goToDetail("addEdit",t.row)}}},[e._v("编辑\n          ")]),n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){e.dimission(t.row)}}},[e._v("离职\n          ")])]}}])})],1),n("paging",{attrs:{data:e.table},on:{"update:data":function(t){e.table=t}}})],1)],1)},i=[],r=(n("28a5"),n("6d67"),n("96cf"),n("1da1")),o=n("c8e7"),l={mixins:[o["a"].$exportDetail],data:function(){return{nav:[{name:"教职工管理",path:""}],searchData:[{type:"select",title:"性别",model:"sex",option:this.$enums.Sex.list},{type:"select",title:"部门",model:"orgId",option:[]},{type:"select",title:"职称",model:"teacherTitleType",option:this.$enums.TeacherTitleType.list},{type:"select",title:"编制",model:"formationType",option:this.$enums.FormationType.list},{type:"cascader",title:"岗位",model:[],modelName:["firstPosition","secondPosition"],option:[]},{type:"select",title:"民族",model:"folk",option:[]},{type:"select",title:"政治面貌",model:"politicsStatus",option:this.$enums.PoliticsStatus.list},{type:"select",title:"第一学历",model:"firstEducation",option:this.$enums.Education.list},{type:"select",title:"最高学历",model:"highestEducation",option:this.$enums.HighestEducation.list},{type:"input",placeholder:"姓名/联系电话"}],table:{url:"/teacher/queryTeacherPage.do",el:".el-table",total:0,noData:!0,list:[],query:{orgId:null,teacherTitleType:null,highestEducation:null,folk:null,politicsStatus:null,firstPosition:null,secondPosition:null,firstEducation:null,formationType:null,sex:null,keywords:null,pageNo:1}},tableData:[{teacherName:"武帝刘彻",sex:"男",org:"语文教研组",idCard:"999999999999999999",birthday:18,age:1,formationType:1,teacherPosition:1,folk:1,residence:1,joinWorkTime:1,politicsStatus:1,joinPartyTime:1,firstEducation:1,highestEducation:1,graduateTime:1,graduateSchool:1,joinSchoolTime:1,schoolAge:1,phone:1,jobStatus:1}]}},methods:{dimission:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("您确认将【".concat(t.teacherName,"】状态设为离职吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return e.next=4,this.$ajax({url:"/teacher/dimissionTeacher.do",query:{id:t.id}});case 4:this.$remind("设为离职成功"),this.$search(this.table);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),goToDetail:function(e,t){this.$router.push({path:"/personnel/teacher/".concat(e),query:{id:t.id}})},getAllDep:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax({url:"/org/queryOrganizationTree.do",query:{orgTypes:["ADMIN_ORG","TEACH_ORG"]}});case 2:t=e.sent,this.searchData[1].option=t.subOrgList.map(function(e){return{value:e.orgId,label:e.orgName}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getPosition:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax({url:"/dict/queryTeacherPositionCascade.do"});case 2:this.searchData[4].option=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),newestTile:function(e){if(!e.length)return"--";for(var t,n=0,a=0;a<e.length;a++)if(e[a].acquireTime){t=new Date(e[a].acquireTime).getTime(),n=a;break}for(var i=0;i<e.length;i++)e[i].acquireTime&&t<new Date(e[i].acquireTime).getTime()&&(n=i);return this.$enums.TeacherTitleType.getName(e[n].title)},newestTime:function(e){if(!e.length)return"--";for(var t,n=0;n<e.length;n++)if(e[n].acquireTime){t=new Date(e[n].acquireTime).getTime(),n;break}for(var a=0;a<e.length;a++)e[a].acquireTime&&t<new Date(e[a].acquireTime).getTime()&&(t=new Date(e[a].acquireTime).getTime());return t?new Date(t).$Format("yyyy-MM-dd"):"--"},getNationList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax({url:"/common/queryNationList.do"});case 2:t=e.sent,this.searchData[5].option=t.map(function(e){return{value:e.id,label:e.nation}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),upload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.files[0],this.$refs.upload.value=null,a=new FormData,a.append("file",n),i={url:"/import/importTeacherInfo.do",query:a,el:".btn-upload",noText:!0},e.next=9,this.$ajax(i);case 9:e.sent,this.$remind("导入成功"),this.$search(this.table);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),computedYear:function(e){if(!e)return"--";var t=new Date(e).$Format("yyyy-MM-dd"),n=(new Date).$Format("yyyy-MM-dd"),a=parseInt(t.split("-")[0]),i=parseInt(n.split("-")[0]),r=parseInt(t.split("-")[1]),o=parseInt(n.split("-")[1]),l=parseInt(t.split("-")[2]),s=parseInt(n.split("-")[2]);s>l?o++:o--,o>r&&i++;var u=i-a-1;return u>=0?u:0}},mounted:function(){this.$search(this.table),this.getAllDep(),this.getPosition(),this.getNationList()}},s=l,u=(n("e60d"),n("2877")),c=Object(u["a"])(s,a,i,!1,null,"0d336a55",null);c.options.__file="Index.vue";t["default"]=c.exports},c8e7:function(e,t,n){"use strict";n("a481");t["a"]={$exportDetail:{methods:{$exportDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.table.query,n="?";for(var a in t)t[a]&&"pageNo"!==a&&"pageSize"!==a&&(n+="".concat(a,"=").concat(t[a],"&"));window.open(this.$conf.API_PATH+e+n.substr(0,n.length-1))}}},$spliceHTML:{methods:{$spliceHTML:function(e){return e=e.replace('<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8">',""),e=e.replace("</head>",""),e=e.replace("</body></html>",""),e=e.replace(/<h2>(.*)<\/h2>/,""),e}}}}},e60d:function(e,t,n){"use strict";var a=n("0468"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-00e76ec1.0315375b.js.map