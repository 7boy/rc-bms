{"version":3,"sources":["webpack:///./src/views/school/organization/Index.vue?5217","webpack:///./src/views/school/organization/Item.vue?2c0c","webpack:///src/views/school/organization/Item.vue","webpack:///./src/views/school/organization/Item.vue?1556","webpack:///./src/views/school/organization/Item.vue","webpack:///src/views/school/organization/Index.vue","webpack:///./src/views/school/organization/Index.vue?3d7a","webpack:///./src/views/school/organization/Index.vue","webpack:///./src/views/school/organization/Item.vue?710f","webpack:///./src/views/school/organization/Item.vue?d169","webpack:///./src/views/school/organization/Index.vue?47c5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","nav","info","data","on","reload","staticRenderFns","Itemvue_type_template_id_4bcedaaf_scoped_true_render","_l","item","orgId","_v","_s","orgName","placement","width","trigger","click","$event","showDialog","slot","_e","class","parent","parentOrgId","hand","subOrgList","length","style","paddingLeft","tier","status","rotate","visibility","remove","directives","name","rawName","value","orgType","expression","$emit","title","visible","dialog","update:visible","focus","placeholder","model","form","callback","$$v","$set","modifyNameFun","addNode","Itemvue_type_template_id_4bcedaaf_scoped_true_staticRenderFns","Itemvue_type_script_lang_js_","components","elCollapseTransition","collapse_transition_default","a","props","type","Array","default","Object","id","methods","str","_modifyNameFun","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","$ajax","url","query","$remind","stop","apply","arguments","_addNode","_callee2","_context2","_remove","_callee3","_context3","$confirm","concat","confirmButtonText","cancelButtonText","_x","organization_Itemvue_type_script_lang_js_","component","componentNormalizer","options","__file","Item","Indexvue_type_script_lang_js_","path","openIds","titleInfo","getDetail","_getDetail","res","arr","orgTypes","sent","recursion","i","_this","forEach","e","indexOf","vm","push","mounted","organization_Indexvue_type_script_lang_js_","Index_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Item_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Item_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Item_vue_vue_type_style_index_1_id_4bcedaaf_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Item_vue_vue_type_style_index_1_id_4bcedaaf_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Index_vue_vue_type_style_index_0_id_0e336a4e_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Index_vue_vue_type_style_index_0_id_0e336a4e_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-5e713028.d7c23a8e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"organization\"},[_c('bread-nav',{attrs:{\"nav\":_vm.nav}}),_c('main-part',[_c('div',{staticClass:\"form\"},[_c('item',{staticClass:\"item-box\",attrs:{\"info\":_vm.info,\"data\":_vm.data},on:{\"reload\":_vm.reload}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-item\"},[_vm._l((_vm.data),function(item){return _c('div',[(item.orgId ===1)?_c('div',{staticClass:\"tree-title\"},[_c('span',[_vm._v(_vm._s(item.orgName))]),_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"180\",\"trigger\":\"hover\"}},[_c('div',{staticClass:\"tree-item-oper\"},[_c('div',{staticClass:\"btn btn-submit mr10\",on:{\"click\":function($event){_vm.showDialog('添加子部门',item)}}},[_vm._v(\"添加子部门\")]),_c('div',{staticClass:\"btn btn-clear\",on:{\"click\":function($event){_vm.showDialog('修改名称',item)}}},[_vm._v(\"修改名称\")])]),_c('i',{staticClass:\"el-icon-more\",attrs:{\"slot\":\"reference\"},slot:\"reference\"})])],1):_vm._e(),(item.orgId !== 1)?_c('div',{class:['item', {'parent': item.parentOrgId === 1}, {'hand': item.subOrgList.length}],style:({paddingLeft: (item.tier - 1) * 25 + 10 + 'px'}),on:{\"click\":function($event){item.status = !item.status}}},[_c('i',{class:[{'rotate': item.status}, 'el-icon-caret-right'],style:({'visibility': item.subOrgList.length? 'visible': 'hidden'})}),_c('span',[_vm._v(_vm._s(item.orgName))]),_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"260\",\"trigger\":\"hover\"}},[_c('div',{staticClass:\"tree-item-oper\"},[_c('div',{staticClass:\"btn btn-submit mr10\",on:{\"click\":function($event){_vm.showDialog('添加子部门',item)}}},[_vm._v(\"添加子部门\")]),_c('div',{staticClass:\"btn btn-clear mr10\",on:{\"click\":function($event){_vm.showDialog('修改名称',item)}}},[_vm._v(\"修改名称\")]),_c('div',{staticClass:\"btn btn-remove\",on:{\"click\":function($event){_vm.remove(item)}}},[_vm._v(\"删除\")])]),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.orgType !== 'TEACH_ORG'),expression:\"item.orgType !== 'TEACH_ORG'\"}],staticClass:\"el-icon-more\",attrs:{\"slot\":\"reference\"},slot:\"reference\"})])],1):_vm._e(),_c('el-collapse-transition',[_c('item',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.status),expression:\"item.status\"}],attrs:{\"info\":{},\"data\":item.subOrgList},on:{\"reload\":function($event){_vm.$emit('reload')}}})],1)],1)}),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":_vm.title,\"width\":\"500px\",\"visible\":_vm.dialog},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('span',{staticClass:\"title\"},[_vm._v(\"部门名称：\")]),_c('el-input',{staticClass:\"input\",attrs:{\"focus\":_vm.dialog,\"placeholder\":\"请输入部门名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('div',{staticClass:\"btns\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title === '修改名称'),expression:\"title === '修改名称'\"}],staticClass:\"btn-submit mr15\",on:{\"click\":_vm.modifyNameFun}},[_vm._v(\"确定\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title === '添加子部门'),expression:\"title === '添加子部门'\"}],staticClass:\"btn-submit mr15\",on:{\"click\":_vm.addNode}},[_vm._v(\"确定\")]),_c('div',{staticClass:\"btn-clear\",on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"取消\")])])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tree-item\">\n    <div v-for=\"item in data\">\n      <div v-if=\"item.orgId ===1\" class=\"tree-title\">\n        <span>{{item.orgName}}</span>\n        <el-popover\n            placement=\"right\"\n            width=\"180\"\n            trigger=\"hover\"\n        >\n          <div class=\"tree-item-oper\">\n            <div @click=\"showDialog('添加子部门',item)\" class=\"btn btn-submit mr10\">添加子部门</div>\n            <div @click=\"showDialog('修改名称',item)\" class=\"btn btn-clear\">修改名称</div>\n          </div>\n          <i class=\"el-icon-more\" slot=\"reference\"></i>\n        </el-popover>\n      </div>\n      <div  v-if=\"item.orgId !== 1\"\n           :class=\"['item', {'parent': item.parentOrgId === 1}, {'hand': item.subOrgList.length}]\"\n           :style=\"{paddingLeft: (item.tier - 1) * 25 + 10 + 'px'}\"\n           @click=\"item.status = !item.status\">\n        <i :style=\"{'visibility': item.subOrgList.length? 'visible': 'hidden'}\"\n           :class=\"[{'rotate': item.status}, 'el-icon-caret-right']\"></i>\n        <span>{{item.orgName}}</span>\n        <el-popover\n            placement=\"right\"\n            width=\"260\"\n            trigger=\"hover\"\n        >\n          <div class=\"tree-item-oper\">\n            <div @click=\"showDialog('添加子部门',item)\" class=\"btn btn-submit mr10\">添加子部门</div>\n            <div @click=\"showDialog('修改名称',item)\" class=\"btn btn-clear mr10\">修改名称</div>\n            <div @click=\"remove(item)\" class=\"btn btn-remove\">删除</div>\n          </div>\n          <i v-show=\"item.orgType !== 'TEACH_ORG'\" class=\"el-icon-more\" slot=\"reference\"></i>\n        </el-popover>\n      </div>\n      <el-collapse-transition>\n        <item v-show=\"item.status\" :info=\"{}\" @reload=\"$emit('reload')\" :data=\"item.subOrgList\"></item>\n      </el-collapse-transition>\n    </div>\n    <!--添加 修改部门-->\n    <el-dialog\n        class=\"dialog\"\n        :title=\"title\"\n        width=\"500px\"\n        :visible.sync=\"dialog\"\n    >\n      <span class=\"title\">部门名称：</span>\n      <el-input :focus=\"dialog\" class=\"input\" v-model=\"form.name\" placeholder=\"请输入部门名称\"></el-input>\n      <div class=\"btns\">\n        <div v-show=\"title === '修改名称'\" @click=\"modifyNameFun\" class=\"btn-submit mr15\">确定</div>\n        <div v-show=\"title === '添加子部门'\" @click=\"addNode\" class=\"btn-submit mr15\">确定</div>\n        <div @click=\"dialog = false\" class=\"btn-clear\">取消</div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n  // collapse 展开折叠\n  import CollapseTransition from 'element-ui/lib/transitions/collapse-transition';\n\n  export default {\n    components: {\n      elCollapseTransition: CollapseTransition\n    },\n    props: {\n      data: {\n        type: Array,\n        default: []\n      },\n      info: {\n        type: Object,\n        default: {}\n      }\n    },\n    name: 'item',\n    data() {\n      return {\n        title: '修改部门名称',\n        dialog: false,\n        form: {\n          name: '',\n          id: ''\n        }\n      }\n    },\n    methods: {\n      // 展现弹窗\n      showDialog(str, item) {\n        this.title = str\n        if (str === '添加子部门') {\n          this.form.name = ''\n        } else {\n          this.form.name = item.orgName\n        }\n        this.form.id = item.orgId\n        this.dialog = true\n      },\n      // 修改名称\n      async modifyNameFun() {\n        await this.$ajax({\n          url: '/org/updateOrganization.do',\n          query: {\n            orgId: this.form.id,\n            orgName: this.form.name\n          }\n        })\n        this.$remind('修改成功')\n        this.dialog = false\n        this.$emit('reload')\n      },\n      // 添加子节点\n      async addNode() {\n        await this.$ajax({\n          url: '/org/addOrganization.do',\n          query: {\n            name: this.form.name,\n            parentOrgId: this.form.id\n          }\n        })\n        this.$remind('添加成功')\n        this.dialog = false\n        this.$emit('reload')\n      },\n      // 删除机构\n      async remove(item) {\n        await this.$confirm(`您是否确认删除【${item.orgName}】`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        await this.$ajax({\n          url: '/org/deleteOrganization.do',\n          query: {\n            orgId: item.orgId\n          }\n        })\n        this.$remind('删除成功')\n        this.dialog = false\n        this.$emit('reload')\n      }\n    },\n\n  }\n</script>\n<style lang=\"sass\">\n  .tree-item-oper\n    .btn\n      display: inline-block\n      width: 70px\n      font-size: $font-small\n      height: 30px\n      border-radius: 4px\n      line-height: 30px\n    .btn-clear\n      background: $assist-c\n      color: #fff\n</style>\n<style lang=\"sass\" scoped>\n  .tree-item\n    .tree-title\n      line-height: 46px\n      padding-left: 15px\n      color: #fff\n      background: $main-c\n      i\n        font-size: $font-large\n        margin-right: 6px\n        vertical-align: middle\n        transition: all .2s\n        cursor: pointer\n        position: absolute\n        right: 10px\n        line-height: 46px\n        color: $fc-def\n    .item\n      position: relative\n      background: #ffffff\n      border-top: 1px solid $border\n      line-height: 46px\n      padding: 0 10px\n      i\n        font-size: $font-large\n        margin-right: 6px\n        vertical-align: middle\n        transition: all .2s\n      .el-icon-more\n        cursor: pointer\n        position: absolute\n        right: 10px\n        line-height: 46px\n      .rotate\n        transform: rotate(90deg)\n      .icons\n        width: 48px\n        display: inline-block\n        text-align: right\n\n    .hand\n      cursor: pointer\n    .parent\n      background: $back-light\n    .dialog\n      .input\n        width: 260px\n      .title\n        width: 80px\n        display: inline-block\n      .btns\n        text-align: center\n        margin-top: 30px\n\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Item.vue?vue&type=template&id=4bcedaaf&scoped=true&\"\nimport script from \"./Item.vue?vue&type=script&lang=js&\"\nexport * from \"./Item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Item.vue?vue&type=style&index=0&lang=sass&\"\nimport style1 from \"./Item.vue?vue&type=style&index=1&id=4bcedaaf&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bcedaaf\",\n  null\n  \n)\n\ncomponent.options.__file = \"Item.vue\"\nexport default component.exports","<template>\n  <div class=\"organization\">\n    <bread-nav :nav=\"nav\"></bread-nav>\n    <main-part>\n      <div class=\"form\">\n        <item @reload=\"reload\" :info=\"info\" class=\"item-box\" :data=\"data\"></item>\n      </div>\n    </main-part>\n  </div>\n\n</template>\n<script>\n  import item from './Item'\n\n  export default {\n    components: {\n      item\n    },\n    data() {\n      return {\n        nav: [{name: \"学校组织机构\", path: \"\"}],\n        info: {},\n        data: [],\n        // 被展开的节点 保证修改完名称重新获取数据时节点还是被展开的\n        openIds: [],\n        titleInfo: null\n      }\n    },\n    methods: {\n      async getDetail() {\n        let res = await this.$ajax({\n          url: '/org/queryOrganizationTree.do',\n          query:{\n            orgTypes: ['ADMIN_ORG','TEACH_ORG']\n          }\n        })\n        let arr = this.recursion(res.subOrgList,1)\n        this.info = {\n          orgName: res.orgName,\n          orgId: res.orgName\n        }\n        this.data = [{\n          orgName: res.orgName,\n          status: true,\n          orgId: res.orgId,\n\n          subOrgList: arr\n        }]\n      },\n      // 递归给每一个item设为关闭状态\n      recursion(arr,i){\n        arr.forEach( e => {\n          if(this.openIds.indexOf(e.orgId) !== -1){\n            e.status = true\n            e.tier = i\n          }else{\n            e.tier = i\n            e.status = false\n          }\n          e.tier = i\n          if(e.subOrgList.length > 0){\n            this.recursion(e.subOrgList, i + 1)\n          }\n        })\n        return arr\n      },\n      // 添加子节点或者修改名称的回调\n      reload(){\n        // 获取被展开的节点\n        this.openIds = []\n        let vm = this\n        function recursion(arr) {\n          arr.forEach(e=>{\n            if(e.status){\n              vm.openIds.push(e.orgId)\n            }\n            if(e.subOrgList.length > 0){\n              recursion(e.subOrgList)\n            }\n          })\n        }\n        recursion(this.data)\n        this.getDetail()\n      }\n    },\n    mounted() {\n      this.getDetail()\n    }\n  }\n</script>\n<style lang=\"sass\" scoped>\n  .organization\n    .form\n      position: relative\n      border: 1px solid $border\n      width: 500px\n      border-radius: 5px\n      overflow: hidden\n    .title\n      line-height: 46px\n      padding-left: 15px\n      color: #fff\n      background: $main-c\n    .icon\n      position: absolute\n      font-size: $font-large\n      right: 16px\n      top: 0\n      line-height: 46px\n  .oper\n    .btn\n      display: inline-block\n      width: 70px\n      font-size: $font-small\n      height: 30px\n      border-radius: 4px\n      line-height: 30px\n    .btn-clear\n      background: $assist-c\n      color: #fff\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=0e336a4e&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=0e336a4e&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e336a4e\",\n  null\n  \n)\n\ncomponent.options.__file = \"Index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=0&lang=sass&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=1&id=4bcedaaf&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=1&id=4bcedaaf&lang=sass&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=0e336a4e&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=0e336a4e&lang=sass&scoped=true&\""],"sourceRoot":""}