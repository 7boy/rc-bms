(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d03f33f"],{"16c2":function(e,t,a){},"28a5":function(e,t,a){a("214f")("split",2,function(e,t,i){"use strict";var n=a("aae3"),r=i,s=[].push,o="split",l="length",u="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[l]||2!="ab"[o](/(?:ab)*/)[l]||4!="."[o](/(.?)(.?)/)[l]||"."[o](/()()/)[l]>1||""[o](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(a,e,t);var i,o,d,p,h,b=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,f=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,g+"g");c||(i=new RegExp("^"+v.source+"$(?!\\s)",g));while(o=v.exec(a)){if(d=o.index+o[0][l],d>m&&(b.push(a.slice(m,o.index)),!c&&o[l]>1&&o[0].replace(i,function(){for(h=1;h<arguments[l]-2;h++)void 0===arguments[h]&&(o[h]=void 0)}),o[l]>1&&o.index<a[l]&&s.apply(b,o.slice(1)),p=o[0][l],m=d,b[l]>=f))break;v[u]===o.index&&v[u]++}return m===a[l]?!p&&v.test("")||b.push(""):b.push(a.slice(m)),b[l]>f?b.slice(0,f):b}}else"0"[o](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)});return[function(a,n){var r=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,r,n):i.call(String(r),a,n)},i]})},"4c7e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("bread-nav",{attrs:{nav:e.nav}}),a("main-part",[a("el-tabs",{attrs:{lazy:""},on:{"tab-click":e.onTabChange},model:{value:e.curTabIdx,callback:function(t){e.curTabIdx=t},expression:"curTabIdx"}},[a("el-tab-pane",{attrs:{label:"试题库"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("试题类型")]),a("el-select",{on:{change:e.doQuestionSearch},model:{value:e.questionQuery.questionType,callback:function(t){e.$set(e.questionQuery,"questionType",t)},expression:"questionQuery.questionType"}},e._l(e.$enums.QuestionType.allList(),function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("年级")]),a("el-select",{attrs:{loading:e.gradeLoading},on:{change:e.onGradeChange},model:{value:e.questionQuery.gradeId,callback:function(t){e.$set(e.questionQuery,"gradeId",t)},expression:"questionQuery.gradeId"}},e._l(e.gradeAllList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.id}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("科目")]),a("el-select",{attrs:{loading:e.subjectLoading},on:{change:e.doQuestionSearch},model:{value:e.questionQuery.subjectId,callback:function(t){e.$set(e.questionQuery,"subjectId",t)},expression:"questionQuery.subjectId"}},e._l(e.questionSubjectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.subjectName,value:e.id}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("难度系数")]),a("el-select",{on:{change:e.doQuestionSearch},model:{value:e.questionQuery.difficultLevel,callback:function(t){e.$set(e.questionQuery,"difficultLevel",t)},expression:"questionQuery.difficultLevel"}},e._l(e.difficultLevelAllList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("状态")]),a("el-select",{on:{change:e.doQuestionSearch},model:{value:e.questionQuery.publishStatus,callback:function(t){e.$set(e.questionQuery,"publishStatus",t)},expression:"questionQuery.publishStatus"}},e._l(e.publishStatusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),a("div",{staticClass:"search-item search-item--long"},[a("p",{staticClass:"search-item__title"},[e._v("关键字")]),a("el-input",{attrs:{placeholder:"请输入试题关键字, 按回车键进行搜索"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doQuestionSearch(t):null}},model:{value:e.questionQuery.keywords,callback:function(t){e.$set(e.questionQuery,"keywords",t)},expression:"questionQuery.keywords"}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.questionLoading,expression:"questionLoading"}],ref:"questionTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中...",data:e.questionTable,stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"30"}}),e.checkedField.indexOf("题型")>-1?a("el-table-column",{attrs:{label:"题型",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$enums.QuestionType.getName(t.row.questionType)))]}}])}):e._e(),e.checkedField.indexOf("年级")>-1?a("el-table-column",{attrs:{prop:"gradeName",label:"年级",align:"center",width:"90"}}):e._e(),e.checkedField.indexOf("科目")>-1?a("el-table-column",{attrs:{prop:"subjectName",label:"科目",align:"center",width:"90"}}):e._e(),e.checkedField.indexOf("知识点")>-1?a("el-table-column",{attrs:{prop:"knowledgeName",label:"知识点","show-overflow-tooltip":"",align:"center",width:"150"}}):e._e(),e.checkedField.indexOf("试题内容")>-1?a("el-table-column",{attrs:{prop:"address",label:"试题内容","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-overflow"},[e._v(e._s(e._f("html2text")(t.row.titleContent)))])]}}])}):e._e(),e.checkedField.indexOf("难度系数")>-1?a("el-table-column",{attrs:{prop:"difficultLevel",label:"难度系数",align:"center",width:"80"}}):e._e(),e.checkedField.indexOf("创建人")>-1?a("el-table-column",{attrs:{prop:"userName",label:"创建人","show-overflow-tooltip":"",align:"center",width:"100"}}):e._e(),e.checkedField.indexOf("创建时间")>-1?a("el-table-column",{attrs:{label:"创建时间",width:"100","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatTime(t.row.createdTime)))]}}])}):e._e(),e.checkedField.indexOf("状态")>-1?a("el-table-column",{attrs:{prop:"publishStatus",label:"状态",width:"90","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{class:{danger:"YES"===t.row.publishStatus},attrs:{type:"text"}},[e._v("\n                "+e._s("YES"===t.row.publishStatus?"已出卷":"未出卷")+"\n              ")])]}}])}):e._e(),e.checkedField.indexOf("最近使用时间")>-1?a("el-table-column",{attrs:{label:"最近使用时间","show-overflow-tooltip":"",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatTime(t.row.lastUseTime)))]}}])}):e._e(),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e.doEditQuestion(t.row.questionType,t.row.id)}}},[e._v("编辑\n              ")]),a("el-button",{staticClass:"danger",attrs:{type:"text",size:"medium"},on:{click:function(a){e.doDeleteQuestionAndPaper("question",t.row.id)}}},[e._v("删除\n              ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.questionQuery.pageNo,"page-sizes":[10,20,50,100],"page-size":e.questionQuery.pageSize,layout:"sizes, prev, pager, next, total, jumper",total:e.questionTotal},on:{"size-change":e.onPageSizeChange,"current-change":e.queryTableList,"update:currentPage":function(t){e.$set(e.questionQuery,"pageNo",t)}}}),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"click"}},[a("el-checkbox-group",{attrs:{min:1,max:8},on:{change:e.onShowFieldChange},model:{value:e.checkedField,callback:function(t){e.checkedField=t},expression:"checkedField"}},e._l(e.fieldsOption,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t}},[e._v(e._s(t)+"\n            ")])})),a("el-button",{attrs:{slot:"reference",icon:"el-icon-setting"},slot:"reference"},[e._v("自定义设置")])],1)],1),a("el-tab-pane",{attrs:{label:"试卷库"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("年级")]),a("el-select",{attrs:{loading:e.gradeLoading},on:{change:e.onGradeChange},model:{value:e.paperQuery.gradeId,callback:function(t){e.$set(e.paperQuery,"gradeId",t)},expression:"paperQuery.gradeId"}},e._l(e.gradeAllList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.id}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("科目")]),a("el-select",{attrs:{loading:e.subjectLoading},on:{change:e.doPaperSearch},model:{value:e.paperQuery.subjectId,callback:function(t){e.$set(e.paperQuery,"subjectId",t)},expression:"paperQuery.subjectId"}},e._l(e.paperSubjectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.subjectName,value:e.id}})}))],1),a("div",{staticClass:"search-item"},[a("p",{staticClass:"search-item__title"},[e._v("组卷方式")]),a("el-select",{on:{change:e.doPaperSearch},model:{value:e.paperQuery.groupMode,callback:function(t){e.$set(e.paperQuery,"groupMode",t)},expression:"paperQuery.groupMode"}},e._l(e.$enums.GroupMode.allList(),function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),a("div",{staticClass:"search-item search-item--long"},[a("p",{staticClass:"search-item__title"},[e._v("关键字")]),a("el-input",{attrs:{placeholder:"输入试卷名称/创建人, 按回车键进行搜索"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doPaperSearch(t):null}},model:{value:e.paperQuery.keywords,callback:function(t){e.$set(e.paperQuery,"keywords",t)},expression:"paperQuery.keywords"}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.paperLoading,expression:"paperLoading"}],ref:"paperTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中...",data:e.paperTable,stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"30"}}),a("el-table-column",{attrs:{prop:"paperTitle",label:"试卷名称","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"gradeName",label:"年级",align:"center"}}),a("el-table-column",{attrs:{prop:"subjectName","show-overflow-tooltip":"",label:"科目",align:"center"}}),a("el-table-column",{attrs:{label:"组卷方式","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$enums.GroupMode.getName(t.row.groupMode)))]}}])}),a("el-table-column",{attrs:{prop:"totalScore",label:"总分","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"userName",label:"创建人",align:"center"}}),e.checkedField.indexOf("创建时间")>-1?a("el-table-column",{attrs:{label:"创建时间",width:"100","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatTime(t.row.createdTime)))]}}])}):e._e(),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e.doEditPaper(t.row.id)}}},[e._v("编辑\n              ")]),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e.doPaperDownload(t.row.id)}}},[e._v("下载\n              ")]),a("el-button",{staticClass:"danger",attrs:{type:"text",size:"medium"},on:{click:function(a){e.doDeleteQuestionAndPaper("paper",t.row.id)}}},[e._v("删除\n              ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.paperQuery.pageNo,"page-sizes":[10,20,50,100],"page-size":e.paperQuery.pageSize,layout:"sizes, prev, pager, next, total, jumper",total:e.paperTotal},on:{"size-change":e.onPageSizeChange,"current-change":e.queryTableList,"update:currentPage":function(t){e.$set(e.paperQuery,"pageNo",t)}}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.curTabIdx,expression:"curTabIdx === '0'"}],staticClass:"btn-block"},[a("div",{staticClass:"btn-main",on:{click:e.doBatchImportQuestion}},[e._v("批量导入")]),a("div",{staticClass:"btn-main",on:{click:function(t){e.doDeleteQuestionAndPaper("question")}}},[e._v("批量删除")]),a("div",{staticClass:"btn-main",on:{click:e.doBatchUpdateQuestion}},[e._v("批量更新")]),a("div",{staticClass:"btn-main-deepen ml15",on:{click:e.goBasicSetting}},[e._v("基础设置")]),a("div",{staticClass:"btn-main-deepen ml15",on:{click:e.goAddQuestion}},[e._v("添加试题")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.curTabIdx,expression:"curTabIdx === '1'"}],staticClass:"btn-block"},[a("div",{staticClass:"btn-main",on:{click:e.goAddPaper}},[e._v("组卷")]),a("div",{staticClass:"btn-main",on:{click:function(t){e.doDeleteQuestionAndPaper("paper")}}},[e._v("批量删除")])])],1),a("el-dialog",{attrs:{title:"批量更新试题",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"updateQuestionForm",attrs:{model:e.updateQuestionSubmit,rules:e.updateQuestionRules}},[a("el-form-item",{attrs:{label:"年级",prop:"gradeId","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择年级"},on:{change:e.onGradeChange},model:{value:e.updateQuestionSubmit.gradeId,callback:function(t){e.$set(e.updateQuestionSubmit,"gradeId",t)},expression:"updateQuestionSubmit.gradeId"}},e._l(e.gradeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"科目",prop:"subjectId","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择科目"},model:{value:e.updateQuestionSubmit.subjectId,callback:function(t){e.$set(e.updateQuestionSubmit,"subjectId",t)},expression:"updateQuestionSubmit.subjectId"}},e._l(e.updateSubjectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.subjectName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"知识点",prop:"knowledgeIds","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",filterable:"",loading:e.knowledgeLoading,placeholder:"请选择知识点"},model:{value:e.updateQuestionSubmit.knowledgeIds,callback:function(t){e.$set(e.updateQuestionSubmit,"knowledgeIds",t)},expression:"updateQuestionSubmit.knowledgeIds"}},e._l(e.knowledgeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.knowledgeName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"难度系数",prop:"difficultLevel","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择难度系数"},model:{value:e.updateQuestionSubmit.difficultLevel,callback:function(t){e.$set(e.updateQuestionSubmit,"difficultLevel",t)},expression:"updateQuestionSubmit.difficultLevel"}},e._l(e.difficultLevelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.updateQuestionLoading},on:{click:e.doConfirmBatchUpdateQuestion}},[e._v("确 定\n      ")])],1)],1),a("el-dialog",{attrs:{title:"批量导入试题",visible:e.batchImportDialogVisible,width:"500px",center:""},on:{"update:visible":function(t){e.batchImportDialogVisible=t}}},[a("el-form",{ref:"batchImportForm",attrs:{rules:e.batchImportRules,model:e.batchImportQuestion,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"年级",prop:"gradeId"}},[a("el-select",{on:{change:e.onGradeChange},model:{value:e.batchImportQuestion.gradeId,callback:function(t){e.$set(e.batchImportQuestion,"gradeId",t)},expression:"batchImportQuestion.gradeId"}},e._l(e.gradeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"科目",prop:"subjectId"}},[a("el-select",{attrs:{loading:e.subjectLoading},model:{value:e.batchImportQuestion.subjectId,callback:function(t){e.$set(e.batchImportQuestion,"subjectId",t)},expression:"batchImportQuestion.subjectId"}},e._l(e.batchImportSubjectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.subjectName,value:e.id}})}))],1)],1),a("import-excel",{attrs:{type:"试题批量导入模板"},on:{"btn-click":e.doValidBatchImportForm,change:e.doBatchImportQuestionTemplate}})],1)],1)},n=[],r=(a("96cf"),a("1da1")),s=(a("6d67"),a("a481"),a("28a5"),{data:function(){var e=[{label:"1.0",value:1},{label:"2.0",value:2},{label:"3.0",value:3},{label:"4.0",value:4},{label:"5.0",value:5},{label:"6.0",value:6}],t=function(e){return[{label:"全部",value:null}].concat(e)},a=this;return{nav:[{name:"题库管理",path:""}],curTabIdx:a.$route.query.tabIdx||"0",fieldsOption:["题型","年级","科目","知识点","试题内容","难度系数","创建人","创建时间","状态","最近使用时间"],checkedField:[],gradeLoading:!1,gradeList:[],gradeAllList:[],subjectLoading:!1,updateSubjectList:[],questionSubjectList:[],paperSubjectList:[],batchImportSubjectList:[],difficultLevelList:e,difficultLevelAllList:t(e),publishStatusList:[{label:"全部",value:null},{label:"已出卷",value:"YES"},{label:"未出卷",value:"NO"}],knowledgeLoading:!1,knowledgeList:[],questionLoading:!0,questionQuery:{pageNo:1,pageSize:10,questionType:null,gradeId:null,subjectId:null,difficultLevel:null,publishStatus:null,keywords:null},questionTable:[],questionTotal:null,selectedIds:[],paperLoading:!0,paperQuery:{pageNo:1,pageSize:10,gradeId:null,subjectId:null,groupMode:null,keywords:null},paperTable:[],paperTotal:null,dialogFormVisible:!1,formLabelWidth:"80px",updateQuestionLoading:!1,updateQuestionSubmit:{questionIds:[],gradeId:null,subjectId:null,difficultLevel:null,knowledgeIds:[]},updateQuestionRules:{gradeId:{required:!0,message:"请选择年级",trigger:"change"},subjectId:{required:!0,message:"请选择科目",trigger:"change"},knowledgeIds:{required:!0,message:"请选择知识点",trigger:"change"},difficultLevel:{required:!0,message:"请选择难度系数",trigger:"change"}},batchImportDialogVisible:!1,batchImportQuestion:{gradeId:null,subjectId:null,knowledgeIds:[]},batchImportRules:{gradeId:{required:!0,message:"请选择年级",trigger:"change"},subjectId:{required:!0,message:"请选择科目",trigger:"change"}}}},created:function(){var e=localStorage.getItem("questionBankShowField");this.checkedField=e?e.split(","):this.fieldsOption.slice(0,8),this.queryGradeList(),this.doQuestionSearch(),this.doPaperSearch()},methods:{onTabChange:function(e){var t="0"===this.curTabIdx?this.$refs.paperTable:this.$refs.questionTable;t.clearSelection(),this.selectedIds=[],this.$router.replace({name:"QuestionList",query:{tabIdx:this.curTabIdx}})},handleSelectionChange:function(e){this.selectedIds=e.map(function(e){return e.id})},formatTime:function(e){return e&&e.substring(0,10)||"--"},queryGradeList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.gradeLoading=!0,e.prev=1,e.next=4,this.$api.queryQGradeList();case 4:t=e.sent,this.gradeList=t,this.gradeAllList=[{gradeName:"全部",id:null}].concat(t),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:this.gradeLoading=!1;case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}(),querySubjectList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.dialogFormVisible){e.next=5;break}if(this.updateQuestionSubmit.gradeId){e.next=3;break}return e.abrupt("return");case 3:e.next=14;break;case 5:if(!this.batchImportDialogVisible){e.next=10;break}if(this.batchImportQuestion.gradeId){e.next=8;break}return e.abrupt("return");case 8:e.next=14;break;case 10:if("0"!==this.curTabIdx||this.questionQuery.gradeId){e.next=12;break}return e.abrupt("return");case 12:if("1"!==this.curTabIdx||this.paperQuery.gradeId){e.next=14;break}return e.abrupt("return");case 14:return this.subjectLoading=!0,t=this.dialogFormVisible?this.updateQuestionSubmit.gradeId:this.batchImportDialogVisible?this.batchImportQuestion.gradeId:"0"===this.curTabIdx?this.questionQuery.gradeId:this.paperQuery.gradeId,e.prev=16,e.next=19,this.$api.queryQSubjectList({gradeId:t});case 19:a=e.sent,this.dialogFormVisible?this.updateSubjectList=a:this.batchImportDialogVisible?this.batchImportSubjectList=a:(i=[{subjectName:"全部",id:null}].concat(a),"0"===this.curTabIdx?this.questionSubjectList=i:this.paperSubjectList=i),e.next=25;break;case 23:e.prev=23,e.t0=e["catch"](16);case 25:this.subjectLoading=!1;case 26:case"end":return e.stop()}},e,this,[[16,23]])}));return function(){return e.apply(this,arguments)}}(),queryKnowledgeList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.knowledgeLoading=!0,e.next=3,this.$api.queryQKnowledgeInfoList({gradeId:this.updateQuestionSubmit.gradeId,subjectId:this.updateQuestionSubmit.subjectId});case 3:this.knowledgeList=e.sent,this.knowledgeLoading=!1;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),queryTableList:function(){"0"===this.curTabIdx?this.doQuestionSearch():this.doPaperSearch()},onGradeChange:function(e){this.dialogFormVisible?this.updateQuestionSubmit.subjectId=null:this.batchImportDialogVisible?this.batchImportQuestion.subjectId=null:"0"===this.curTabIdx?this.questionQuery.subjectId=null:this.paperQuery.subjectId=null,null===e?this.dialogFormVisible?this.updateSubjectList=[]:this.batchImportDialogVisible?this.batchImportSubjectList=[]:"0"===this.curTabIdx?this.questionSubjectList=[]:this.paperSubjectList=[]:this.querySubjectList(),this.dialogFormVisible||this.batchImportDialogVisible||("0"===this.curTabIdx?this.doQuestionSearch():this.doPaperSearch())},onShowFieldChange:function(e){localStorage.setItem("questionBankShowField",e.join(","))},onPageSizeChange:function(e){"0"===this.curTabIdx?this.questionQuery.pageSize=e:this.paperQuery.pageSize=e,this.queryTableList()},goAddQuestion:function(){this.$router.push({name:"QuestionAdd"})},goBasicSetting:function(){this.$router.push({name:"QuestionSetting"})},goAddPaper:function(){this.$router.push({name:"PaperAdd"})},doEditQuestion:function(e,t){this.$router.push({name:"QuestionEdit",params:{id:t},query:{questionType:e}})},doEditPaper:function(e){this.$router.push({name:"PaperEdit",params:{id:e}})},doDeleteQuestionAndPaper:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i="paper"===t?"试卷":"试题",a||this.selectedIds.length){e.next=4;break}return this.$message({message:"请选择要删除的".concat(i),type:"warning"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,this.$confirm("此操作将永久删除该【".concat(i,"】, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 7:if(n=a?[a]:this.selectedIds,"paper"!==t){e.next=14;break}return e.next=11,this.$api.delQPaperInfo({ids:n});case 11:this.doPaperSearch(),e.next=17;break;case 14:return e.next=16,this.$api.batchDelQuestion({ids:n});case 16:this.doQuestionSearch();case 17:this.$remind("删除成功"),e.next=22;break;case 20:e.prev=20,e.t0=e["catch"](4);case 22:case"end":return e.stop()}},e,this,[[4,20]])}));return function(t,a){return e.apply(this,arguments)}}(),doBatchUpdateQuestion:function(){this.selectedIds.length?(this.updateQuestionSubmit.questionIds=this.selectedIds,this.queryKnowledgeList(),this.dialogFormVisible=!0):this.$message({message:"请选择要批量更新的试题",type:"warning"})},doConfirmBatchUpdateQuestion:function(){var e=this;this.$refs.updateQuestionForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}return e.updateQuestionLoading=!0,t.prev=2,t.next=5,e.$api.batchUpdateQuestionAttributes(e.updateQuestionSubmit);case 5:e.dialogFormVisible=!1,e.$remind("更新成功"),e.doQuestionSearch(),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](2);case 12:return e.updateQuestionLoading=!1,t.abrupt("return");case 14:e.$message({message:"请将表单按提示填写完整",type:"warning"});case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}())},doBatchImportQuestion:function(){this.batchImportDialogVisible=!0},doValidBatchImportForm:function(e){this.$refs.batchImportForm.validate(function(t){t||e.preventDefault()})},doBatchImportQuestionTemplate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:return a=t.target.files[0],i=new FormData,i.append("file",a),i.append("subjectId",this.batchImportQuestion.subjectId),e.prev=6,e.next=9,this.$ajax({url:"/questionImport/batchImportQuestion.do",query:i,el:".upload"});case 9:this.$message.success("试题批量导入成功"),this.batchImportDialogVisible=!1,this.doQuestionSearch(),e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](6);case 16:case"end":return e.stop()}},e,this,[[6,14]])}));return function(t){return e.apply(this,arguments)}}(),doPaperDownload:function(e){var t=window.location.origin;window.location.href="".concat(t).concat(this.$conf.API_PATH,"/paperDownload/downLoadPaperWordFile.do?id=").concat(e)},doQuestionSearch:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.questionLoading=!0,e.prev=1,e.next=4,this.$api.queryQuestionManagePage(this.questionQuery);case 4:t=e.sent,this.questionTable=t.list,this.questionTotal=t.total,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:this.questionLoading=!1;case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}(),doPaperSearch:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.paperLoading=!0,e.prev=1,e.next=4,this.$api.queryQPaperManagePage(this.paperQuery);case 4:t=e.sent,this.paperTable=t.list,this.paperTotal=t.total,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:this.paperLoading=!1;case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()}}),o=s,l=(a("aa8f"),a("2877")),u=Object(l["a"])(o,i,n,!1,null,"97910f5e",null);u.options.__file="List.vue";t["default"]=u.exports},aa8f:function(e,t,a){"use strict";var i=a("16c2"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-4d03f33f.15567a63.js.map