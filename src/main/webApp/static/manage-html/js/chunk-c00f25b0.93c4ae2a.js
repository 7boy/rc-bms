(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c00f25b0"],{"8b46":function(e,t,a){"use strict";var n=a("c0c6"),i=a.n(n);i.a},a787:function(t,a,n){"use strict";n.r(a);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plan"},[a("div",{staticClass:"table-box"},[a("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入：区段作业面"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getData()}},model:{value:e.table.query.condition.workSegmentName,callback:function(t){e.$set(e.table.query.condition,"workSegmentName",t)},expression:"table.query.condition.workSegmentName"}}),a("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入：作业区间"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getData()}},model:{value:e.table.query.condition.mileageSegmentName,callback:function(t){e.$set(e.table.query.condition,"mileageSegmentName",t)},expression:"table.query.condition.mileageSegmentName"}}),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.table.query.condition.workDate,callback:function(t){e.$set(e.table.query.condition,"workDate",t)},expression:"table.query.condition.workDate"}}),a("div",{staticClass:"btn-main ",on:{click:e.getData}},[e._v("查   询")]),a("div",{staticClass:"btn-main btn-add",on:{click:function(t){e.showDialog("add")}}},[e._v("新建作业面")]),a("table",{staticClass:"table",attrs:{cellspacing:"0"}},[e._m(0),e._l(e.table.list,function(t,n){return a("tr",[a("td",[e._v(e._s(n+1+(e.table.query.currentPage-1)*e.table.query.pageSize))]),a("td",[e._v(e._s(t.roleName))]),a("td",{attrs:{title:t.roleDesc}},[e._v(e._s(t.roleDesc))]),a("td",[e._v(e._s("00"===t.roleType?"默认":"自定义"))]),a("td",[e._v(e._s(new Date(t.createTime).$Format("yyyy-MM-dd hh:mm:ss")))]),a("td",[a("span",{staticClass:"oper"},[e._v("修改")]),a("span",{staticClass:"col"}),a("span",{staticClass:"oper",on:{click:function(a){e.remove(t)}}},[e._v("删除")])])])})],2),a("el-pagination",{staticClass:"pagination",attrs:{"page-size":e.table.query.pageSize,"current-page":e.table.query.currentPage,layout:"prev, pager, next, jumper",total:e.table.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.table.query,"currentPage",t)}}})],1),a("el-dialog",{attrs:{modal:!1,center:"",title:e.title,visible:e.dialog,width:"480px"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{ref:"form",staticClass:"form",attrs:{"label-width":"96px","label-position":"left"}},[a("el-form-item",{attrs:{label:"作业区间"}},[a("el-select",{model:{value:e.addEditCofing.query.mileageSegmentId,callback:function(t){e.$set(e.addEditCofing.query,"mileageSegmentId",t)},expression:"addEditCofing.query.mileageSegmentId"}},e._l(e.mileageSegment,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.mileageSegmentName}})}))],1),a("el-form-item",{attrs:{label:"作业面"}},[a("el-checkbox",[e._v("上行")]),e._v("\n        k "),a("el-input",{staticClass:"short",model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v("\n        + "),a("el-input",{staticClass:"small",model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._v("\n        - k "),a("el-input",{staticClass:"short",model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}}),e._v("\n        + "),a("el-input",{staticClass:"small",model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}}),a("el-checkbox",{staticClass:"ml5"},[e._v("下行")])],1),a("el-form-item",{attrs:{label:"作业时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._l(e.value6,function(t){return a("div",[a("el-time-picker",{staticClass:"time-picker",attrs:{"is-range":"",size:"mini","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}}),a("i",{staticClass:"icon el-icon-plus",on:{click:function(t){e.value6.push({time:null})}}})],1)})],2),a("el-form-item",{attrs:{label:"安全员"}},[a("el-input-number",{staticClass:"mr5",attrs:{size:"mini","controls-position":"right",min:1,max:1e4}}),a("span",[e._v("人")])],1),a("el-form-item",{attrs:{label:"防护员"}},[a("el-input-number",{staticClass:"mr5",attrs:{size:"mini","controls-position":"right",min:1,max:1e4}}),a("span",[e._v("人")])],1),a("el-form-item",{attrs:{label:"现场人员人数"}},[a("el-input-number",{staticClass:"mr5",attrs:{size:"mini","controls-position":"right",min:1,max:1e4}}),a("span",[e._v("人")])],1),a("el-form-item",{attrs:{label:"提交人"}},[a("el-input",{staticClass:"w130",attrs:{disabled:"",value:e.userName}})],1),a("el-form-item",{attrs:{label:"提交时间"}},[a("el-date-picker",{attrs:{disabled:"",type:"date",placeholder:"选择日期"},model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}})],1)],1),a("div",{staticClass:"btns mt25"},[a("div",{staticClass:"btn-main mr15",on:{click:function(t){e.addEditFun()}}},[e._v("提交")]),a("div",{staticClass:"btn-main",on:{click:function(t){e.dialog=!1}}},[e._v("关闭")])])],1)],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{attrs:{width:"7%"}},[e._v("序号")]),a("th",{attrs:{width:"12%"}},[e._v("区段作业面")]),a("th",{attrs:{width:"12%"}},[e._v("作业区间")]),a("th",{attrs:{width:"12%"}},[e._v("作业时间")]),a("th",{attrs:{width:"8%"}},[e._v("安全员人数")]),a("th",{attrs:{width:"8%"}},[e._v("防护员人数")]),a("th",{attrs:{width:"8%"}},[e._v("现场员人数")]),a("th",{attrs:{width:"9%"}},[e._v("提交人")]),a("th",{attrs:{width:"12%"}},[e._v("提交时间")]),a("th",{attrs:{width:"12%"}},[e._v("操作")])])}],r=(n("96cf"),n("1da1")),s=(n("cadf"),n("551c"),n("097d"),JSON.parse(localStorage.getItem("userInfo")).username),o={name:"Plan",data:function(){return{value1:"",value2:"",value3:"",value4:"",value5:null,value7:new Date,value6:[{time:null}],table:{url:"/workSegment/list",loading:".table",list:[],total:0,query:{condition:{mileageSegmentName:"",workSegmentName:"",workDate:null},currentPage:1,pageSize:this.$conf.PAGES}},addEditCofing:{url:"",query:{mileageSegmentId:null,mileageSegmentName:"",startMileageName:"",endMileageName:""}},userName:s,visible:!1,title:"新建作业面",dialog:!1,mileageSegment:[]}},methods:{showDialog:function(e,t){this.dialog=!0,this.checkedKeys=[],this.title="新建作业面",this.addEditCofing.query={}},getData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax(this.table);case 2:t=e.sent,this.table.list=t.pageItems,this.table.total=t.totalCount;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),remove:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("您确认删除该角色吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return e.next=4,this.$ajax({url:"/role/delete",query:{id:t.id}});case 4:this.$remind("删除成功"),this.getData();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addEditFun:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("","修改作业面"===this.title?("修改成功",this.roleList.url="/workSegment/update"):("新建成功",this.addEditCofing.url="/workSegment/add"),this.value1||this.value2||this.value3||this.value4){t.next=5;break}return this.$message.warning("请输入作业面"),t.abrupt("return");case 5:this.addEditCofing.query.startMileageName="k".concat(this.value1,"+").concat(this.value2),this.addEditCofing.query.endMileageName="k".concat(this.value3,"+").concat(this.value4),a=0;case 8:if(!(a<this.mileageSegment.length)){t.next=15;break}if(e.id!==this.addEditCofing.mileageSegmentId){t.next=12;break}return this.addEditCofing.query.mileageSegmentName=e.mileageSegmentName,t.abrupt("break",15);case 12:a++,t.next=8;break;case 15:console.log(this.addEditCofing.query);case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleCurrentChange:function(e){this.table.query.currentPage=e,this.getData()},getMileageSegment:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax({url:"/mileageSegment/all"});case 2:t=e.sent,console.log(t.list),this.mileageSegment=t.list;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.getData(),this.getMileageSegment()}},u=o,c=(n("8b46"),n("2877")),m=Object(c["a"])(u,i,l,!1,null,"1a1f1664",null);m.options.__file="Plan.vue";a["default"]=m.exports},c0c6:function(e,t,a){}}]);
//# sourceMappingURL=chunk-c00f25b0.93c4ae2a.js.map