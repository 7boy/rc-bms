(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e713028"],{"1ed1":function(t,e,i){},"1f86":function(t,e,i){},4414:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"organization"},[i("bread-nav",{attrs:{nav:t.nav}}),i("main-part",[i("div",{staticClass:"form"},[i("item",{staticClass:"item-box",attrs:{info:t.info,data:t.data},on:{reload:t.reload}})],1)])],1)},a=[],r=(i("57e7"),i("ac6a"),i("f3e2"),i("96cf"),i("1da1")),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tree-item"},[t._l(t.data,function(e){return i("div",[1===e.orgId?i("div",{staticClass:"tree-title"},[i("span",[t._v(t._s(e.orgName))]),i("el-popover",{attrs:{placement:"right",width:"180",trigger:"hover"}},[i("div",{staticClass:"tree-item-oper"},[i("div",{staticClass:"btn btn-submit mr10",on:{click:function(i){t.showDialog("添加子部门",e)}}},[t._v("添加子部门")]),i("div",{staticClass:"btn btn-clear",on:{click:function(i){t.showDialog("修改名称",e)}}},[t._v("修改名称")])]),i("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1):t._e(),1!==e.orgId?i("div",{class:["item",{parent:1===e.parentOrgId},{hand:e.subOrgList.length}],style:{paddingLeft:25*(e.tier-1)+10+"px"},on:{click:function(t){e.status=!e.status}}},[i("i",{class:[{rotate:e.status},"el-icon-caret-right"],style:{visibility:e.subOrgList.length?"visible":"hidden"}}),i("span",[t._v(t._s(e.orgName))]),i("el-popover",{attrs:{placement:"right",width:"260",trigger:"hover"}},[i("div",{staticClass:"tree-item-oper"},[i("div",{staticClass:"btn btn-submit mr10",on:{click:function(i){t.showDialog("添加子部门",e)}}},[t._v("添加子部门")]),i("div",{staticClass:"btn btn-clear mr10",on:{click:function(i){t.showDialog("修改名称",e)}}},[t._v("修改名称")]),i("div",{staticClass:"btn btn-remove",on:{click:function(i){t.remove(e)}}},[t._v("删除")])]),i("i",{directives:[{name:"show",rawName:"v-show",value:"TEACH_ORG"!==e.orgType,expression:"item.orgType !== 'TEACH_ORG'"}],staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])],1):t._e(),i("el-collapse-transition",[i("item",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"item.status"}],attrs:{info:{},data:e.subOrgList},on:{reload:function(e){t.$emit("reload")}}})],1)],1)}),i("el-dialog",{staticClass:"dialog",attrs:{title:t.title,width:"500px",visible:t.dialog},on:{"update:visible":function(e){t.dialog=e}}},[i("span",{staticClass:"title"},[t._v("部门名称：")]),i("el-input",{staticClass:"input",attrs:{focus:t.dialog,placeholder:"请输入部门名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),i("div",{staticClass:"btns"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"修改名称"===t.title,expression:"title === '修改名称'"}],staticClass:"btn-submit mr15",on:{click:t.modifyNameFun}},[t._v("确定")]),i("div",{directives:[{name:"show",rawName:"v-show",value:"添加子部门"===t.title,expression:"title === '添加子部门'"}],staticClass:"btn-submit mr15",on:{click:t.addNode}},[t._v("确定")]),i("div",{staticClass:"btn-clear",on:{click:function(e){t.dialog=!1}}},[t._v("取消")])])],1)],2)},o=[],c=(i("7f7f"),i("5488")),l=i.n(c),u={components:{elCollapseTransition:l.a},props:{data:{type:Array,default:[]},info:{type:Object,default:{}}},name:"item",data:function(){return{title:"修改部门名称",dialog:!1,form:{name:"",id:""}}},methods:{showDialog:function(t,e){this.title=t,this.form.name="添加子部门"===t?"":e.orgName,this.form.id=e.orgId,this.dialog=!0},modifyNameFun:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax({url:"/org/updateOrganization.do",query:{orgId:this.form.id,orgName:this.form.name}});case 2:this.$remind("修改成功"),this.dialog=!1,this.$emit("reload");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addNode:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax({url:"/org/addOrganization.do",query:{name:this.form.name,parentOrgId:this.form.id}});case 2:this.$remind("添加成功"),this.dialog=!1,this.$emit("reload");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("您是否确认删除【".concat(e.orgName,"】"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return t.next=4,this.$ajax({url:"/org/deleteOrganization.do",query:{orgId:e.orgId}});case 4:this.$remind("删除成功"),this.dialog=!1,this.$emit("reload");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},d=u,m=(i("651a"),i("6f97"),i("2877")),f=Object(m["a"])(d,s,o,!1,null,"4bcedaaf",null);f.options.__file="Item.vue";var h=f.exports,g={components:{item:h},data:function(){return{nav:[{name:"学校组织机构",path:""}],info:{},data:[],openIds:[],titleInfo:null}},methods:{getDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax({url:"/org/queryOrganizationTree.do",query:{orgTypes:["ADMIN_ORG","TEACH_ORG"]}});case 2:e=t.sent,i=this.recursion(e.subOrgList,1),this.info={orgName:e.orgName,orgId:e.orgName},this.data=[{orgName:e.orgName,status:!0,orgId:e.orgId,subOrgList:i}];case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),recursion:function(t,e){var i=this;return t.forEach(function(t){-1!==i.openIds.indexOf(t.orgId)?(t.status=!0,t.tier=e):(t.tier=e,t.status=!1),t.tier=e,t.subOrgList.length>0&&i.recursion(t.subOrgList,e+1)}),t},reload:function(){this.openIds=[];var t=this;function e(i){i.forEach(function(i){i.status&&t.openIds.push(i.orgId),i.subOrgList.length>0&&e(i.subOrgList)})}e(this.data),this.getDetail()}},mounted:function(){this.getDetail()}},v=g,p=(i("90eb"),Object(m["a"])(v,n,a,!1,null,"0e336a4e",null));p.options.__file="Index.vue";e["default"]=p.exports},"651a":function(t,e,i){"use strict";var n=i("1f86"),a=i.n(n);a.a},"6f97":function(t,e,i){"use strict";var n=i("1ed1"),a=i.n(n);a.a},"90eb":function(t,e,i){"use strict";var n=i("e077"),a=i.n(n);a.a},e077:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5e713028.d7c23a8e.js.map