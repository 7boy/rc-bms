(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4c3f13a"],{2332:function(t,e,a){"use strict";var i=a("d2b8"),n=a.n(i);n.a},"397a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("bread-nav",{attrs:{nav:t.nav}}),a("main-part",{staticClass:"main"},[a("search-box",{attrs:{searchData:t.searchData,table:t.table}}),a("div",{staticClass:"btns"},[a("div",{staticClass:"btn-main",on:{click:t.ClickDateLine}},[t._v("导出")])]),a("resize-table",[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{attrs:{width:"6%"}},[t._v("部门")]),a("th",{attrs:{width:"6%"}},[t._v("姓名")]),a("th",{attrs:{width:"5%"}},[t._v("性别")]),a("th",{attrs:{width:"7%"}},[t._v("项目名称")]),a("th",{attrs:{width:"12%"}},[t._v("类型")]),a("th",{attrs:{width:"9%"}},[t._v("颁奖单位")]),a("th",{attrs:{width:"15%"}},[t._v("获奖等级及取得的成绩")]),a("th",{attrs:{width:"9%"}},[t._v("获得时间")]),a("th",{attrs:{width:"9%"}},[t._v("审核结果")]),a("th",{attrs:{width:"9%"}},[t._v("评分")]),a("th",{attrs:{width:"17%"}},[t._v("操作")])])]),a("tbody",t._l(t.table.list,function(e,i){return a("tr",[a("td",[t._v(t._s(e.organizations[0].name))]),a("td",[t._v(t._s(e.teacherName))]),a("td",[t._v(t._s(t.$enums.Sex.getName(e.sex)))]),a("td",[t._v(t._s(e.entryName))]),a("td",[t._v(t._s(t.$enums.ProjectType.getName(e.entryType)))]),a("td",[t._v(t._s(e.awardUnit))]),a("td",[t._v(t._s(e.achievement))]),a("td",[t._v(t._s(t._f("substrTime")(e.obtainTime)))]),a("td",[a("span",{staticStyle:{"margin-right":"2px"}},[t._v(t._s(t.$enums.ExamineType.getName(e.examineResult)))]),"NOT_PASS"===e.examineResult?a("el-tooltip",{attrs:{effect:"dark",content:e.reason,placement:"right"}},[a("i",{staticClass:"el-icon-warning"})]):t._e()],1),a("td",{staticStyle:{padding:"0 3px"}},["ADOPT"===e.examineResult&&!0!==e.status?a("span",[t._v(t._s(e.score))]):t._e(),"ADOPT"===e.examineResult&&!0===e.status?a("el-input",{attrs:{placeholder:"输入评分",size:"small"},model:{value:t.formScore.score,callback:function(e){t.$set(t.formScore,"score",e)},expression:"formScore.score"}}):t._e()],1),a("td",[!0!==e.status?a("a",{staticClass:"oper",attrs:{href:e.fileUrl},on:{click:function(a){t.onViewClick(e)}}},[t._v("下载证明材料")]):t._e(),"UNAUDITED"===e.examineResult?a("span",{staticClass:"oper",on:{click:function(a){t.review(e)}}},[t._v("审核")]):t._e(),"ADOPT"===e.examineResult&&!0!==e.status?a("span",{staticClass:"oper",on:{click:function(a){t.onSwitch(e,i)}}},[t._v("评分")]):t._e(),!0===e.status?a("span",{staticClass:"oper",on:{click:function(a){t.onSubmitScore(e,i)}}},[t._v("提交评分")]):t._e(),!0===e.status?a("span",{staticClass:"oper",on:{click:function(a){t.cancelScore(e,i)}}},[t._v("取消")]):t._e()])])}))])]),a("no-data",{directives:[{name:"show",rawName:"v-show",value:!t.table.noData,expression:"!table.noData"}]}),a("paging",{attrs:{data:t.table},on:{"update:data":function(e){t.table=e}}}),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"审核结果："}},[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},on:{change:t.onFailSwitchChange},model:{value:t.form.examineType,callback:function(e){t.$set(t.form,"examineType",e)},expression:"form.examineType"}},t._l(t.Review,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t.failSwitch?a("el-form-item",{attrs:{label:"原因："}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入原因"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1):t._e()],1),a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"btn-submit",on:{click:t.onSubmitStatus}},[t._v("确定")]),a("div",{staticClass:"btn-clear",staticStyle:{"margin-left":"20px"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])])],1),a("el-dialog",{attrs:{title:"证明材料",visible:t.annexDialogVisible,width:"30%"},on:{"update:visible":function(e){t.annexDialogVisible=e}}},[t._l(t.annexList,function(e,i){return a("div",{staticClass:"annex"},[a("a",{attrs:{href:e.fileUrl,target:"_blank"}},[t._v("点击下载证明材料"+t._s(i+1))])])}),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("div",{staticClass:"btn-submit",on:{click:function(e){t.annexDialogVisible=!1}}},[t._v("返回")])])],2)],1)],1)},n=[],s=(a("c5f6"),a("96cf"),a("1da1")),r=(a("a481"),a("c8e7")),l={mixins:[r["a"].$exportDetail],data:function(){return{nav:[{name:"教研成果",path:""}],dialogDate:[],searchData:[{type:"input",placeholder:"项目名称"},{type:"select",title:"类型",model:"entryType",option:this.$enums.ProjectType.allList()},{type:"dateSection",title:"时间",startDate:(new Date).setTime((new Date).getTime()-7776e6),endDate:new Date,modelName:["startDate","endDate"]}],table:{url:"/teachingResearch/queryTeachingResearchPage.do",el:".table",total:0,noData:!0,list:[],query:{keywords:null,entryType:null,startDate:new Date((new Date).setMonth((new Date).getMonth()-6)).$Format("yyyy-MM-dd 00:00:00"),endDate:(new Date).$Format("yyyy-MM-dd hh:mm:ss")}},dialogVisible:!1,title:null,switch:!1,switchOne:!0,failSwitch:!1,form:{id:null,examineType:null,reason:null},formScore:{id:"",score:""},annexDialogVisible:!1,annexList:[],Review:this.$enums.ExamineType.list}},watch:{dialogVisible:function(){if(this.dialogVisible||(this.failSwitch=!1,this.form.examineType=null),this.dialogVisible){if(this.Review.length<3)return;this.Review.shift()}}},methods:{ClickDateLine:function(){var t=this.table.query.startDate,e=this.table.query.endDate;this.table.query.startDate=this.table.query.startDate.substr(0,10),this.table.query.startDate=this.table.query.startDate.replace(/(\d{4})-(\d{2})-(\d{2})/g,"$1/$2/$3"),this.table.query.endDate=this.table.query.endDate.substr(0,10),this.table.query.endDate=this.table.query.endDate.replace(/(\d{4})-(\d{2})-(\d{2})/g,"$1/$2/$3"),this.$exportDetail("/export/teachingResearchExport.do"),this.table.query.startDate=t,this.table.query.endDate=e},onViewClick:function(t){this.annexDialogVisible=!0,this.annexList=t.attachments},onSwitch:function(t,e){this.formScore={id:t.id,score:t.score},t.status=!0,this.table.list.splice(e,1,t)},review:function(t){this.dialogVisible=!0,this.form.id=t.id},onFailSwitchChange:function(t){this.failSwitch="NOT_PASS"===t},cancelScore:function(t,e){t.status=!1,this.table.list.splice(e,1,t)},onSubmitScore:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(Number(this.formScore.score)<Number("1"))){t.next=3;break}return this.$message.warning("评分不能小于1哦"),t.abrupt("return");case 3:return t.next=5,this.$ajax({url:"/teachingResearch/scoreTeachingResearch.do",el:".table",query:this.formScore});case 5:this.$remind("评分成功"),this.$search(this.table);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onSubmitStatus:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$ajax({url:"/teachingResearch/examineTeachingResearch.do",query:this.form});case 3:this.$remind("设置成功"),this.dialogVisible=!1,this.$search(this.table),this.form.id=null,this.form.examineType=null,this.form.reason=null,t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.form.id=null,this.form.examineType=null,this.form.reason=null;case 16:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$search(this.table);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},o=l,c=(a("2332"),a("2877")),h=Object(c["a"])(o,i,n,!1,null,"2c290f35",null);h.options.__file="Index.vue";e["default"]=h.exports},c8e7:function(t,e,a){"use strict";a("a481");e["a"]={$exportDetail:{methods:{$exportDetail:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.table.query,a="?";for(var i in e)e[i]&&"pageNo"!==i&&"pageSize"!==i&&(a+="".concat(i,"=").concat(e[i],"&"));window.open(this.$conf.API_PATH+t+a.substr(0,a.length-1))}}},$spliceHTML:{methods:{$spliceHTML:function(t){return t=t.replace('<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8">',""),t=t.replace("</head>",""),t=t.replace("</body></html>",""),t=t.replace(/<h2>(.*)<\/h2>/,""),t}}}}},d2b8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e4c3f13a.f6fc71a1.js.map