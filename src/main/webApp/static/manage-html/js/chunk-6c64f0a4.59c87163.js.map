{"version":3,"sources":["webpack:///./src/views/command/Role.vue?5a5f","webpack:///src/views/command/Role.vue","webpack:///./src/views/command/Role.vue?aa99","webpack:///./src/views/command/Role.vue","webpack:///./src/views/command/Role.vue?8f56"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","placeholder","nativeOn","keyup","$event","_k","keyCode","key","getData","model","value","table","query","condition","callback","$$v","$set","expression","on","click","_v","showDialog","cellspacing","_m","_l","item","_s","roleName","title","roleDesc","roleType","createTime","getRoleDetail","remove","page-size","pageSize","current-page","currentPage","layout","total","current-change","handleCurrentChange","update:currentPage","modal","center","visible","dialog","width","update:visible","ref","label-width","label-position","prop","label","roleList","placement","trigger","data","authorities","list","props","defaultProps","default-expanded-keys","node-key","show-checkbox","default-checked-keys","checkedKeys","slot","$refs","tree","setCheckedKeys","getCheckedKeys","editRole","staticRenderFns","Rolevue_type_script_lang_js_","name","url","loading","children","methods","type","_getRoleDetail","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","i","wrap","_context","prev","next","$ajax","id","sent","push","stop","_x","apply","arguments","getAuthorities","_getAuthorities","_callee2","_context2","console","log","_getData","_callee3","_context3","pageItems","totalCount","_remove","_callee4","_context4","$confirm","confirmButtonText","cancelButtonText","$remind","_x2","_editRole","_callee5","text","_context5","length","$message","warning","abrupt","e","mounted","command_Rolevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Role_vue_vue_type_style_index_0_id_4284d214_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Role_vue_vue_type_style_index_0_id_4284d214_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6c64f0a4.59c87163.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"table-box\"},[_c('el-input',{staticClass:\"mr10\",attrs:{\"placeholder\":\"请输入：角色名称\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.getData()}},model:{value:(_vm.table.query.condition.roleName),callback:function ($$v) {_vm.$set(_vm.table.query.condition, \"roleName\", $$v)},expression:\"table.query.condition.roleName\"}}),_c('div',{staticClass:\"btn-main \",on:{\"click\":_vm.getData}},[_vm._v(\"查   询\")]),_c('div',{staticClass:\"btn-main btn-add\",on:{\"click\":function($event){_vm.showDialog('add')}}},[_vm._v(\"新建自定义角色\")]),_c('table',{staticClass:\"table\",attrs:{\"cellspacing\":\"0\"}},[_vm._m(0),_vm._l((_vm.table.list),function(item,key){return _c('tr',[_c('td',[_vm._v(_vm._s(key + 1))]),_c('td',[_vm._v(_vm._s(item.roleName))]),_c('td',{attrs:{\"title\":item.roleDesc}},[_vm._v(_vm._s(item.roleDesc))]),_c('td',[_vm._v(_vm._s(item.roleType === '00'? '默认': '自定义'))]),_c('td',[_vm._v(_vm._s(item.createTime))]),_c('td',[_c('span',{staticClass:\"oper\",on:{\"click\":function($event){_vm.getRoleDetail(item)}}},[_vm._v(\"修改\")]),_c('span',{staticClass:\"col\"}),_c('span',{staticClass:\"oper\",on:{\"click\":function($event){_vm.remove(item)}}},[_vm._v(\"删除\")])])])})],2),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"page-size\":_vm.table.query.pageSize,\"current-page\":_vm.table.query.currentPage,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.table.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.table.query, \"currentPage\", $event)}}})],1),_c('el-dialog',{attrs:{\"modal\":false,\"center\":\"\",\"title\":_vm.title,\"visible\":_vm.dialog,\"width\":\"420px\"},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"label-width\":\"70px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"角色名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色名称\"},model:{value:(_vm.roleList.query.roleName),callback:function ($$v) {_vm.$set(_vm.roleList.query, \"roleName\", $$v)},expression:\"roleList.query.roleName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"角色描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色描述\"},model:{value:(_vm.roleList.query.roleDesc),callback:function ($$v) {_vm.$set(_vm.roleList.query, \"roleDesc\", $$v)},expression:\"roleList.query.roleDesc\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"oldPassword\",\"label\":\"权限设置\"}},[_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"400\",\"trigger\":\"click\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('el-tree',{ref:\"tree\",staticClass:\"el-tree\",attrs:{\"data\":_vm.authorities.list,\"props\":_vm.defaultProps,\"default-expanded-keys\":['root'],\"node-key\":\"id\",\"show-checkbox\":\"\",\"default-checked-keys\":_vm.checkedKeys}}),_c('div',{staticClass:\"btn-set\",attrs:{\"slot\":\"reference\"},on:{\"click\":function($event){_vm.$refs.tree.setCheckedKeys(_vm.checkedKeys);_vm.visible = !_vm.visible}},slot:\"reference\"},[_vm._v(\"设置权限\")]),_c('div',{staticClass:\"btns mt25\"},[_c('div',{staticClass:\"btn-main mr15\",on:{\"click\":function($event){_vm.checkedKeys = _vm.$refs.tree.getCheckedKeys();_vm.visible = false}}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"关闭\")])])],1)],1)],1),_c('div',{staticClass:\"btns mt25\"},[_c('div',{staticClass:\"btn-main mr15\",on:{\"click\":function($event){_vm.editRole()}}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"关闭\")])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('th',{attrs:{\"width\":\"13%\"}},[_vm._v(\"序号\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"角色名称\")]),_c('th',{attrs:{\"width\":\"25%\"}},[_vm._v(\"角色描述\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"类型\")]),_c('th',{attrs:{\"width\":\"14%\"}},[_vm._v(\"创建时间\")]),_c('th',{attrs:{\"width\":\"20%\"}},[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"table-box\">\n      <el-input v-model=\"table.query.condition.roleName\"\n                @keyup.enter.native=\"getData()\"\n                class=\"mr10\" placeholder=\"请输入：角色名称\"></el-input>\n      <div @click=\"getData\" class=\"btn-main \">查&nbsp;&nbsp;&nbsp;询</div>\n      <div @click=\"showDialog('add')\" class=\"btn-main btn-add\">新建自定义角色</div>\n      <table cellspacing=\"0\"  class=\"table\">\n        <tr>\n          <th width=\"13%\">序号</th>\n          <th width=\"14%\">角色名称</th>\n          <th width=\"25%\">角色描述</th>\n          <th width=\"14%\">类型</th>\n          <th width=\"14%\">创建时间</th>\n          <th width=\"20%\">操作</th>\n        </tr>\n        <tr v-for=\"(item,key) in table.list\">\n          <td>{{key + 1}}</td>\n          <td>{{item.roleName}}</td>\n          <td :title=\"item.roleDesc\">{{item.roleDesc}}</td>\n          <td>{{item.roleType === '00'? '默认': '自定义'}}</td>\n          <td>{{item.createTime}}</td>\n          <td>\n            <span @click=\"getRoleDetail(item)\" class=\"oper\">修改</span>\n            <span class=\"col\"></span>\n            <span @click=\"remove(item)\" class=\"oper\">删除</span>\n          </td>\n        </tr>\n      </table>\n      <el-pagination\n          class=\"pagination\"\n          :page-size=\"table.query.pageSize\"\n          @current-change=\"handleCurrentChange\"\n          :current-page.sync=\"table.query.currentPage\"\n          layout=\"prev, pager, next, jumper\"\n          :total=\"table.total\">\n      </el-pagination>\n    </div>\n    <el-dialog :modal=\"false\" center :title=\"title\"\n               :visible.sync=\"dialog\" width=\"420px\">\n      <el-form class=\"form\" ref=\"form\" label-width=\"70px\" label-position=\"left\">\n        <el-form-item prop=\"oldPassword\" label=\"角色名称\">\n          <el-input v-model=\"roleList.query.roleName\"  placeholder=\"请输入角色名称\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"角色描述\">\n          <el-input v-model=\"roleList.query.roleDesc\" placeholder=\"请输入角色描述\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"oldPassword\" label=\"权限设置\">\n          <el-popover\n            v-model=\"visible\"\n            placement=\"right\"\n            width=\"400\"\n            trigger=\"click\">\n          <el-tree class=\"el-tree\" :data=\"authorities.list\"\n                   :props=\"defaultProps\"\n                   :default-expanded-keys=\"['root']\"\n                   ref=\"tree\"\n                   node-key=\"id\" show-checkbox\n                   :default-checked-keys=\"checkedKeys\"\n                   ></el-tree>\n          <div slot=\"reference\"\n               @click=\"$refs.tree.setCheckedKeys(checkedKeys);visible = !visible\" class=\"btn-set\">设置权限</div>\n          <div class=\"btns mt25\">\n            <div @click=\"checkedKeys = $refs.tree.getCheckedKeys();visible = false\" class=\"btn-main mr15\">提交</div>\n            <div @click=\"visible = false\" class=\"btn-main\">关闭</div>\n          </div>\n        </el-popover>\n        </el-form-item>\n      </el-form>\n      <div class=\"btns mt25\">\n        <div  @click=\"editRole()\" class=\"btn-main mr15\">提交</div>\n        <div @click=\"dialog = false\" class=\"btn-main\">关闭</div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"Info\",\n    data(){\n      return {\n        table:{\n          url: '/role/list',\n          loading: '.table',\n          list: [],\n          total: 0,\n          query:{\n            condition:{\n              roleName: '',\n            },\n            currentPage: 1,\n            pageSize: 15,\n          }\n        },\n        // 权限列表\n        authorities: {\n          url: '/role/authorities',\n          list: []\n        },\n        // 选中的角色\n        checkedKeys: [],\n        // 角色\n        roleList: {\n          url: '/role/add',\n          query:{\n            roleName: '',\n            roleDesc: '',\n            authorities: []\n          }\n        },\n        visible: false,\n        title: '新建自定义角色',\n        dialog: false,\n        defaultProps: {\n          children: 'authorities',\n          label: 'name'\n        }\n      }\n    },\n    methods: {\n      // 展现弹窗\n      showDialog(type, item){\n        this.dialog = true\n        this.checkedKeys = []\n\n          this.title = '新建自定义角色'\n          this.roleList.query = {\n            roleName: '',\n            roleDesc: '',\n            authorities: []\n          }\n      },\n      // 获取角色详情\n      async getRoleDetail(item){\n        let res = await this.$ajax({\n          url: '/role/detail',\n          query: {\n            id: item.id\n          }\n        })\n        this.roleList.query = {\n          id: res.id,\n          roleName: res.roleName,\n          roleDesc: res.roleDesc,\n          authorities: res.authorities\n        }\n        this.checkedKeys = []\n        for(let i in res.authorities){\n          this.checkedKeys.push(i)\n        }\n        this.dialog = true\n        this.title = '修改自定义角色'\n      },\n      // 查询所有权限\n      async getAuthorities(){\n        let res = await this.$ajax(this.authorities)\n        console.log(res)\n        this.authorities.list = [res]\n      },\n      // 获取表格数据\n      async getData(){\n        let res = await this.$ajax(this.table)\n        this.table.list = res.pageItems\n        this.table.total = res.totalCount\n        console.log(this.table.total)\n      },\n      // 删除\n      async remove(item){\n        await this.$confirm(`您确认删除该角色吗？`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        await this.$ajax({\n          url: '/role/delete',\n          query:{\n            id: item.id\n          }\n        })\n        this.$remind('删除成功')\n        this.getData()\n      },\n      // 新增角色\n      async editRole(){\n        let text = ''\n        if(this.title === '修改自定义角色'){\n          text = '修改成功'\n          this.roleList.url = '/role/update'\n        }else{\n          text = '新增成功'\n          this.roleList.url = '/role/add'\n        }\n        this.roleList.query.authorities = this.checkedKeys\n        if(!this.roleList.query.authorities.length){\n          this.$message.warning('请设置权限')\n          return\n        }\n        if(!this.roleList.query.roleName){\n          this.$message.warning('请输入角色名称')\n          return\n        }\n        await this.$ajax(this.roleList)\n        this.$remind(text)\n        this.dialog = false\n        this.table.query = {\n          condition:{\n            roleName: '',\n          },\n          currentPage: 1,\n          pageSize: 15,\n        }\n        this.getData()\n      },\n      // 分页切换\n      handleCurrentChange(e){\n        this.table.query.currentPage = e\n        this.getData()\n      }\n    },\n    mounted() {\n      this.getData()\n      this.getAuthorities()\n    }\n  }\n</script>\n\n<style lang=\"sass\" scoped>\n  .btn-set\n    width: 100%\n    text-align: center\n    height: 34px\n    line-height: 34px\n    border-radius: 20px\n    color: $main-c\n    border: 1px solid $main-c\n    cursor: pointer\n    display: inline-block\n    &:hover\n      opacity: .7\n    &:active\n      opacity: 1\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=4284d214&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=4284d214&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4284d214\",\n  null\n  \n)\n\ncomponent.options.__file = \"Role.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=4284d214&lang=sass&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=4284d214&lang=sass&scoped=true&\""],"sourceRoot":""}